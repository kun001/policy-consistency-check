## 数据存储方法
### 还未实现

```markdown
混合方案的工作流 (MVP 版):
1. 1.文件上传 :
   - 在 storage/docs/ 下创建一个新的 doc_id 文件夹。
   - 将上传的原始文件存为 storage/docs/<doc_id>/raw.pdf 。
   - 在 SQLite 的 documents 表 中 INSERT 一条新记录，包含 doc_id , 文件名, 文件路径 ( docs/<doc_id>/raw.pdf ), 来源 ( local ) 和初始状态 ( processing )。
2. 2.处理文件 :
   - 运行智谱、Dify 等流程。
   - 将 content.txt , keywords.json 存入 storage/docs/<doc_id>/ 文件夹。
   - 处理完成后， UPDATE SQLite 中对应的记录 ，更新 status 为 succeeded ，并把 summary , keywords 等信息填入表中。
3. 3.查询展示 :
   - 前端请求文档列表时，后端直接 SELECT SQLite 的 documents 表 ，轻松实现分页、搜索、排序。
   - 查看单个文档详情时，根据 doc_id 从数据库拿到元数据，再从文件系统 storage/docs/<doc_id>/ 读取 structured.json 等派生文件内容。
```

文件内容提取API返回结构案例
fronted zhipuApi
```markdown
{
  "status": "succeeded",
  "message": "结果获取成功",
  "content": "文档正文内容",
  "task_id": "97afea83f5eb4f56b21775a36aa9ea9a",
  "parsing_result_url": "http://file-extract.cn-wlcb.ufileos.com/parsed_1760592861871-3bf5ee322d8e4556933360cf780b2e38.zip?UCloudPublicKey=TOKEN_75c8a3ea-0adc-4f4a-b05e-429adc9ebe7f&Signature=oXLwxMGcyg%2FSFLMupQgKm0%2B4pro%3D&Expires=1760679262"
}
```

文件内容分块解析API返回结构案例
py-backend /api/extract_segments
```markdown
{
  "success": true,
  "file": {
    "name": "江西省电力市场中长期交易工作指引3.0版本_1-13.pdf"
  },
  "toc": {
    "id": "doc-1",
    "type": "document",
    "label": null,
    "index": null,
    "text": null,
    "children": [
      {
        "id": "ch-1",
        "type": "chapter",
        "label": "第一章 总则",
        "index": 1,
        "text": null,
        "children": [
          {
            "id": "art-1",
            "type": "article",
            "label": null,
            "index": 1,
            "text": "第一条 为深入贯彻落实《中共中央国务院关于进一步深化电力体制 改革的若干意见》（中发〔2015〕9 号）及其配套文件、《电力中长期\n交易基本规则》（发改能源规〔2020〕889 号）、《关于进一步深化燃\n煤发电上网电价市场化改革的通知》（发改价格〔2021〕1439 号）、《国\n家发展改革委办公厅关于进一步做好电网企业代理购电工作的通知》（发\n改办价格〔2022〕1047 号）、《国家发展改革委国家能源局关于加快建\n设全国统一电力市场体系的指导意见》（发改体改〔2022〕118 号）、\n《国家发展改革委办公厅国家能源局综合司关于有序推进绿色电力交易\n有关事项的通知》（发改办体改〔2022〕821 号）、《国家发展改革委\n关于第三监管周期省级电网输配电价及有关事项的通知》（发改价格\n〔2023〕526 号）、《国家发展改革委办公厅国家能源局综合司关于进\n一步加快推进电力现货市场建设工作的通知》（发改办体改〔2023〕813\n号文）、《国家发展改革委 国家能源局关于建立煤电容量电价机制的通\n知》（发改价格〔2023〕1501 号）、《电力市场运行基本规则》（发改\n2024 年第 20 号令）、《江西省发展改革委关于适当调整分时电价机制\n的通知》（赣发改价管〔2024〕282 号）等文件精神，推进江西省电力\n市场建设，提升电力资源优化配置效率，结合江西实际，制定本细则。",
            "children": null
          },
          {
            "id": "art-2",
            "type": "article",
            "label": "第二条",
            "index": 2,
            "text": "第二条 本细则适用于江西省内电力现货市场运行（含与现货衔接的 中长期交易模拟运行）期间的电力中长期交易。",
            "children": null
          },
          {
            "id": "sec-1",
            "type": "section",
            "label": "第一节 交易品种",
            "index": 1,
            "text": null,
            "children": [
              {
                "id": "art-3",
                "type": "article",
                "label": "第三条",
                "index": 3,
                "text": "第三条 中长期交易品种主要包括电能量交易、合同转让交易等。",
                "children": null
              },
              {
                "id": "art-4",
                "type": "article",
                "label": null,
                "index": 4,
                "text": "第四条 交易的标的物为 24 时段的电能量，根据参与交易的经营 主体与交易方式的不同分为燃煤发电交易、保量保价新能源交易、新型\n经营主体市场交易、绿色电力交易等。",
                "children": null
              }
            ]
          },
          {
            "id": "sec-2",
            "type": "section",
            "label": "第二节 交易方式及周期",
            "index": 2,
            "text": null,
            "children": [
              {
                "id": "art-5",
                "type": "article",
                "label": null,
                "index": 5,
                "text": "第五条 中长期交易方式包括双边协商和集中交易，其中集中交 易包括集中竞价交易、滚动撮合交易和挂牌交易等。中长期交易周期包\n括年度（多年）、月度、“D-2”日（1 小时）等。",
                "children": null
              },
              {
                "id": "art-6",
                "type": "article",
                "label": null,
                "index": 6,
                "text": "第六条 双边协商是指购售双方协商一致后，由一方经营主体通 过电力交易平台将需求电量、价格、电力曲线等信息向交易意向方提出\n要约，由交易意向方接受该要约的交易方式。",
                "children": null
              }
            ]
          }
        ]
      }
    ]
  },
  "counts": {
    "chapters": 1,
    "sections": 2,
    "articles": 6
  }
}
```